import{a as B,o as U,G,r as c,m as i,p as t,s as r,n as u,b as v,z as D,y as P,w as g,u as l,q as b,e as I,v as C,A as L,F as j,x as O,c as E,f as a,B as z}from"./vue-vendor-lZgBCM-Y.js";import{_ as M}from"./index-DjyVIXzc.js";import{_ as Y,a as J}from"./CardContent.vue_vue_type_script_setup_true_lang-BV8KmGM6.js";import{_ as F}from"./Input.vue_vue_type_script_setup_true_lang-DAsqCPaM.js";import{g as Z,A as S,j as N,E as A,k as $,a as H,U as K}from"./ui-vendor-XL1sGzTt.js";import{a as Q}from"./index-C8fGv0Lo.js";import"./index-Dt4uSB3H.js";import"./utils-vendor-D5GkNzM3.js";const W={class:"min-h-screen w-full bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4"},X={class:"relative w-full max-w-md"},ee={class:"flex flex-col items-center justify-center mb-8"},te={class:"flex items-center gap-3 mb-2"},se={class:"text-4xl font-bold text-white"},ae={key:0,class:"mb-6 p-4 bg-green-500/10 border border-green-500/20 rounded-lg"},oe={key:1,class:"mb-6 p-3 bg-red-500/10 border border-red-500/20 rounded-lg"},le={class:"text-sm text-red-400"},re={key:2,class:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg"},ne={class:"relative"},de=["disabled"],ie={class:"relative"},ue=["disabled"],me={key:0,class:"space-y-2"},ce={key:0,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},fe={key:4,class:"mt-6 text-center"},we=B({__name:"ResetPasswordPageTemplate",props:{appName:{default:"App"},appTagline:{default:"Your Application"},logoIcon:{default:Z},logoGradient:{default:"bg-gradient-to-br from-teal-500 to-blue-600 shadow-teal-500/20"},taglineColor:{default:"text-teal-400"},inputFocusColor:{default:"focus:border-teal-500"},buttonGradient:{default:"bg-gradient-to-r from-teal-600 to-blue-600 shadow-teal-500/30 hover:shadow-teal-500/40"},linkColor:{default:"text-teal-400 hover:text-teal-300"},loginRoute:{default:"/login"},forgotPasswordRoute:{default:"/forgot-password"},tokenParam:{default:"token"},onSubmit:{type:Function,default:void 0}},setup(o){const x=o,R=G(),s=c({password:"",confirmPassword:""}),f=c(!1),w=c(!1),m=c(!1),p=c(!1),y=c(!1),h=c(""),k=c(""),V=E(()=>[{label:"At least 8 characters",met:s.value.password.length>=8},{label:"Contains uppercase letter",met:/[A-Z]/.test(s.value.password)},{label:"Contains number",met:/\d/.test(s.value.password)},{label:"Passwords match",met:s.value.password===s.value.confirmPassword&&s.value.password.length>0}]),T=E(()=>s.value.password.length>=8&&s.value.password===s.value.confirmPassword&&V.value.filter(n=>n.met).length>=3);U(()=>{const n=R.query[x.tokenParam];if(!n){y.value=!0;return}k.value=n});async function q(){if(!(!T.value||!k.value)){if(s.value.password!==s.value.confirmPassword){h.value="Passwords do not match";return}m.value=!0,h.value="";try{if(x.onSubmit)await x.onSubmit(k.value,s.value.password,s.value.confirmPassword);else{const n=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:k.value,password:s.value.password,password_confirmation:s.value.confirmPassword})});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to reset password")}}p.value=!0}catch(n){n.message?.includes("invalid")||n.message?.includes("expired")?y.value=!0:h.value=n.message||"Failed to reset password. Please try again."}finally{m.value=!1}}}return(n,e)=>{const _=I("router-link");return a(),i("div",W,[e[13]||(e[13]=t("div",{class:"absolute inset-0 overflow-hidden"},[t("div",{class:"absolute top-1/4 left-1/4 w-96 h-96 bg-teal-500/10 rounded-full blur-3xl animate-pulse"}),t("div",{class:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse",style:{"animation-delay":"1s"}})],-1)),t("div",X,[t("div",ee,[t("div",te,[t("div",{class:u(["flex h-12 w-12 items-center justify-center rounded-xl shadow-lg",o.logoGradient])},[(a(),v(D(o.logoIcon),{class:"h-7 w-7 text-white"}))],2),t("span",se,P(o.appName),1)]),t("p",{class:u(["text-sm font-semibold tracking-wide",o.taglineColor])},P(o.appTagline),3)]),r(l(Y),{class:u(["bg-slate-800/50 backdrop-blur-xl border-2 border-slate-700/50 shadow-2xl"])},{default:g(()=>[r(l(J),{class:"p-8"},{default:g(()=>[e[12]||(e[12]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl font-bold text-white mb-2"},"Reset your password"),t("p",{class:"text-slate-400 text-sm"}," Enter your new password below ")],-1)),p.value?(a(),i("div",ae,[e[5]||(e[5]=t("p",{class:"text-sm text-green-400 font-medium mb-4"}," Password reset successfully! You can now log in with your new password. ",-1)),r(_,{to:o.loginRoute,class:u(["inline-flex items-center gap-2 text-sm font-semibold transition-colors",o.linkColor])},{default:g(()=>[e[4]||(e[4]=C(" Go to login ",-1)),r(l(S),{class:"h-4 w-4"})]),_:1},8,["to","class"])])):b("",!0),h.value?(a(),i("div",oe,[t("p",le,P(h.value),1)])):b("",!0),y.value?(a(),i("div",re,[e[7]||(e[7]=t("p",{class:"text-sm text-red-400 font-medium mb-4"}," This password reset link is invalid or has expired. Please request a new one. ",-1)),r(_,{to:o.forgotPasswordRoute,class:u(["inline-flex items-center gap-2 text-sm font-semibold transition-colors",o.linkColor])},{default:g(()=>[e[6]||(e[6]=C(" Request new reset link ",-1)),r(l(S),{class:"h-4 w-4"})]),_:1},8,["to","class"])])):b("",!0),!p.value&&!y.value?(a(),i("form",{key:3,onSubmit:L(q,["prevent"]),class:"space-y-5"},[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-semibold text-slate-300 mb-2"}," New Password ",-1)),t("div",ne,[r(l(N),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),r(l(F),{modelValue:s.value.password,"onUpdate:modelValue":e[0]||(e[0]=d=>s.value.password=d),type:f.value?"text":"password",placeholder:"••••••••",class:u(["w-full pl-11 pr-12 py-3 bg-slate-900/50 border-2 border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none transition-colors",o.inputFocusColor]),required:"",disabled:m.value},null,8,["modelValue","type","class","disabled"]),t("button",{type:"button",onClick:e[1]||(e[1]=d=>f.value=!f.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",disabled:m.value},[f.value?(a(),v(l(A),{key:0,class:"h-5 w-5"})):(a(),v(l($),{key:1,class:"h-5 w-5"}))],8,de)])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-semibold text-slate-300 mb-2"}," Confirm Password ",-1)),t("div",ie,[r(l(N),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),r(l(F),{modelValue:s.value.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=d=>s.value.confirmPassword=d),type:w.value?"text":"password",placeholder:"••••••••",class:u(["w-full pl-11 pr-12 py-3 bg-slate-900/50 border-2 border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none transition-colors",o.inputFocusColor]),required:"",disabled:m.value},null,8,["modelValue","type","class","disabled"]),t("button",{type:"button",onClick:e[3]||(e[3]=d=>w.value=!w.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",disabled:m.value},[w.value?(a(),v(l(A),{key:0,class:"h-5 w-5"})):(a(),v(l($),{key:1,class:"h-5 w-5"}))],8,ue)])]),s.value.password?(a(),i("div",me,[(a(!0),i(j,null,O(V.value,d=>(a(),i("div",{key:d.label,class:"flex items-center gap-2"},[t("div",{class:u(["w-4 h-4 rounded-full flex items-center justify-center",d.met?"bg-green-500":"bg-slate-700"])},[d.met?(a(),v(l(H),{key:0,class:"h-3 w-3 text-white"})):b("",!0)],2),t("span",{class:u(["text-xs",d.met?"text-green-400":"text-slate-500"])},P(d.label),3)]))),128))])):b("",!0),r(l(M),{type:"submit",disabled:m.value||!T.value,class:u(["w-full flex items-center justify-center gap-2 px-6 py-3 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",o.buttonGradient])},{default:g(()=>[m.value?(a(),i("span",ce)):(a(),i(j,{key:1},[e[10]||(e[10]=C(" Reset Password ",-1)),r(l(S),{class:"h-5 w-5"})],64))]),_:1},8,["disabled","class"])],32)):b("",!0),p.value?b("",!0):(a(),i("div",fe,[r(_,{to:o.loginRoute,class:u(["text-sm font-semibold transition-colors",o.linkColor])},{default:g(()=>[...e[11]||(e[11]=[C(" ← Back to login ",-1)])]),_:1},8,["to","class"])]))]),_:1})]),_:1})])])}}}),Pe=B({__name:"ResetPasswordPage",setup(o){const x=z(),R=G();async function s(f,w,m){const p=R.query.email;if(!p)throw new Error("Email is required for password reset");await Q.post("/auth/reset-password",{token:f,email:p,password:w,password_confirmation:m}),x.push("/login")}return(f,w)=>(a(),v(we,{"app-name":"Coordinator","app-tagline":"Client Coordination Platform","logo-icon":l(K),"logo-gradient":"bg-gradient-to-br from-emerald-500 to-teal-600 shadow-emerald-500/20","tagline-color":"text-emerald-400","primary-glow":"bg-emerald-500/10","secondary-glow":"bg-teal-500/10","input-focus-color":"focus:border-emerald-500","button-gradient":"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/30 hover:shadow-emerald-500/40","link-color":"text-emerald-400 hover:text-emerald-300","login-route":"/login","forgot-password-route":"/forgot-password","token-param":"token","on-submit":s},null,8,["logo-icon"]))}});export{Pe as default};
