import{a as Q,m as l,F as g,q as T,p as t,n as w,y as r,s as h,u as m,f as a,r as S,c as D,o as at,x,v as j,B as st,D as nt,X as E,A as W,b as ot,w as Mt}from"./vue-vendor-BFreJ1An.js";import{_ as At}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CfYC6v2a.js";import{X as Bt,f as Ft,v as zt,g as Ot,a5 as lt,ah as J,ai as K,c as Nt,ab as Ut}from"./ui-vendor-DelVp1tp.js";import{u as rt}from"./appointments-BenL8upM.js";import{u as Lt}from"./coordinators-cKpivT3u.js";import{useOrganizationsStore as it}from"./organizations-BeLDuyV9.js";import{a as Et,b as jt}from"./format-DaYpM1Fu.js";import{g as It}from"./status-DdzIA5VN.js";import{g as Pt,a as Vt}from"./contact-MrFpTDs4.js";import"./index-BsTtUH7V.js";import"./utils-vendor-B9ygI19o.js";const Ht={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none"},Wt={class:"bg-white rounded-xl shadow-2xl w-full max-w-lg pointer-events-auto"},Yt={class:"flex justify-between items-start p-6 border-b border-slate-100"},Xt={class:"flex items-center gap-2 mb-2"},qt={class:"px-2.5 py-0.5 rounded-full bg-blue-50 text-[#1B4F72] text-xs font-medium"},Rt={class:"text-2xl font-bold text-slate-900"},Gt={class:"p-6 space-y-6"},Jt={class:"flex items-center gap-3 text-lg"},Kt={class:"p-2 bg-slate-100 rounded-lg text-slate-500"},Qt={class:"font-bold text-slate-900"},Zt={class:"text-sm text-slate-500"},te={class:"space-y-3 p-4 bg-slate-50 rounded-xl border border-slate-100"},ee={class:"flex items-center justify-between"},se={class:"flex items-center gap-3"},ne={class:"font-medium text-slate-700"},oe={class:"flex items-center justify-between"},ae={class:"flex items-center gap-3"},le={class:"font-medium text-slate-700"},re={class:"flex items-center justify-between text-sm"},ie={class:"flex items-center gap-2"},de={class:"w-8 h-8 rounded-full bg-blue-100 text-[#1B4F72] flex items-center justify-center font-bold text-xs"},ce={class:"font-medium text-slate-900"},ue={class:"text-right"},me={class:"font-medium text-slate-900"},pe={key:0},ge={class:"text-sm text-slate-700"},ve={key:1},xe={class:"text-sm text-slate-700"},fe={class:"flex gap-3 pt-4 border-t border-slate-100"},dt=Q({__name:"AppointmentModal",props:{appointment:{},isOpen:{type:Boolean}},emits:["close","cancel","edit"],setup(c){const C=c;function $(i){return new Date(i).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function f(i){return new Date(i).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})}function y(i){if(i.contact){const d=i.contact;return`${d.first_name} ${d.last_name||""}`.trim()||"Unknown"}return"Unknown"}function p(i){return i.contact&&i.contact.phone||"(555) 234-5678"}function N(i){return i.contact&&i.contact.email||"email@example.com"}function z(i){return i.coordinator?i.coordinator.display_name||"Coordinator":"N/A"}function I(i){return z(i).charAt(0).toUpperCase()}function B(i){return i.appointment_type?i.appointment_type.name:i.title||"Appointment"}function M(i){return{confirmed:"bg-green-100 text-green-700",scheduled:"bg-blue-100 text-blue-700",pending:"bg-amber-100 text-amber-700",cancelled:"bg-red-100 text-red-700",completed:"bg-slate-100 text-slate-600"}[i]||"bg-slate-100 text-slate-600"}function F(){C.appointment}function U(){C.appointment}return(i,d)=>(a(),l(g,null,[c.isOpen?(a(),l("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 transition-opacity",onClick:d[0]||(d[0]=_=>i.$emit("close"))})):T("",!0),c.isOpen&&c.appointment?(a(),l("div",Ht,[t("div",Wt,[t("div",Yt,[t("div",null,[t("div",Xt,[t("span",{class:w(["px-2.5 py-0.5 rounded-full text-xs font-medium",M(c.appointment.status)])},r(c.appointment.status.charAt(0).toUpperCase()+c.appointment.status.slice(1)),3),t("span",qt,r(B(c.appointment)),1)]),t("h2",Rt,r(y(c.appointment)),1)]),t("button",{onClick:d[1]||(d[1]=_=>i.$emit("close")),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors"},[h(m(Bt),{size:20})])]),t("div",Gt,[t("div",Jt,[t("div",Kt,[h(m(Ft),{size:20})]),t("div",null,[t("div",Qt,r($(c.appointment.starts_at))+" - "+r($(c.appointment.ends_at)),1),t("div",Zt,r(f(c.appointment.starts_at)),1)])]),t("div",te,[t("div",ee,[t("div",se,[h(m(zt),{size:16,class:"text-slate-400"}),t("span",ne,r(p(c.appointment)),1)]),d[2]||(d[2]=t("button",{class:"text-xs font-medium text-[#1B4F72] hover:underline"}," Call ",-1))]),t("div",oe,[t("div",ae,[h(m(Ot),{size:16,class:"text-slate-400"}),t("span",le,r(N(c.appointment)),1)]),d[3]||(d[3]=t("button",{class:"text-xs font-medium text-[#1B4F72] hover:underline"}," Email ",-1))])]),t("div",re,[t("div",ie,[t("div",de,r(I(c.appointment)),1),t("div",null,[d[4]||(d[4]=t("div",{class:"text-slate-500 text-xs"},"Booked by",-1)),t("div",ce,r(z(c.appointment)),1)])]),t("div",ue,[d[5]||(d[5]=t("div",{class:"text-slate-500 text-xs"},"Booked on",-1)),t("div",me,r(f(c.appointment.created_at)),1)])]),c.appointment.description?(a(),l("div",pe,[d[6]||(d[6]=t("h3",{class:"text-sm font-bold text-slate-900 mb-2"},"Description",-1)),t("p",ge,r(c.appointment.description),1)])):T("",!0),c.appointment.notes?(a(),l("div",ve,[d[7]||(d[7]=t("h3",{class:"text-sm font-bold text-slate-900 mb-2"},"Notes",-1)),t("p",xe,r(c.appointment.notes),1)])):T("",!0),t("div",fe,[c.appointment.status!=="cancelled"?(a(),l("button",{key:0,onClick:F,class:"flex-1 py-2.5 border border-red-200 text-red-600 font-medium rounded-lg hover:bg-red-50 transition-colors"}," Cancel Appointment ")):T("",!0),t("button",{onClick:U,class:"flex-1 py-2.5 bg-[#1B4F72] text-white font-medium rounded-lg hover:bg-[#153e5a] transition-colors"}," Edit Details ")])])])])):T("",!0)],64))}}),be={class:"h-[calc(100vh-200px)] flex flex-col"},he={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},ye={class:"flex items-center gap-4"},_e={class:"flex bg-slate-100 p-1 rounded-lg"},we=["onClick"],ke={class:"flex flex-1 gap-6 overflow-hidden"},De={class:"w-64 flex-shrink-0 flex flex-col gap-6 overflow-y-auto pr-2"},Ce={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm"},$e={class:"flex justify-between items-center mb-4"},Se={class:"font-bold text-slate-900"},Te={class:"flex gap-1"},Me={class:"grid grid-cols-7 gap-1 text-center text-xs mb-2"},Ae={class:"grid grid-cols-7 gap-1 text-center text-sm"},Be=["onClick"],Fe={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex-1"},ze={class:"space-y-3"},Oe=["onClick"],Ne={class:"text-xs font-bold text-[#1B4F72] mb-1"},Ue={class:"font-medium text-slate-900 text-sm"},Le={class:"text-xs text-slate-500"},Ee={key:0,class:"text-sm text-slate-500 text-center py-4"},je={class:"space-y-4"},Ie={class:"space-y-2"},Pe=["value"],Ve={class:"space-y-2"},He=["value"],We={class:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col"},Ye={class:"flex items-center justify-between border-b border-slate-200 p-4"},Xe={class:"flex items-center gap-4"},qe={class:"text-lg font-bold text-[#1B4F72]"},Re={key:0,class:"flex-1 overflow-y-auto relative"},Ge={class:"flex min-h-[600px]"},Je={class:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50 text-xs text-slate-500 font-medium text-right pr-2 pt-2"},Ke={class:"flex-1 relative"},Qe=["onClick","onDragstart"],Ze={class:"font-bold truncate"},ts={class:"truncate opacity-80"},es={key:1,class:"flex-1 overflow-y-auto relative"},ss={class:"flex min-h-[600px]"},ns={class:"flex-1 grid grid-cols-7 border-b border-slate-200"},os={class:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50 text-xs text-slate-500 font-medium text-right pr-2 pt-2"},as={class:"flex-1 grid grid-cols-7 relative"},ls=["onClick","onDragstart"],rs={class:"font-bold truncate"},is={class:"truncate opacity-80"},ds={class:"flex items-center gap-1 mt-1 opacity-70"},cs={key:2,class:"flex-1 overflow-y-auto p-4"},us={class:"grid grid-cols-7 gap-1 mb-2"},ms={class:"grid grid-cols-7 gap-1"},ps=["onClick","onDrop"],gs={class:"space-y-1"},vs=["onClick","onDragstart"],xs=Q({__name:"CalendarView",setup(c){const C=rt(),$=Lt(),f=it(),y=S("week"),p=S(new Date),N=S(null),z=S(!1),I=S(!1),B=S([]),M=S([]),F=Array.from({length:11},(s,n)=>n+8),U=D(()=>p.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),i=D(()=>{const s=p.value.getFullYear(),n=p.value.getMonth(),e=new Date(s,n,1),o=new Date(e);o.setDate(o.getDate()-o.getDay());const b=[],k=new Date;k.setHours(0,0,0,0);for(let A=0;A<42;A++){const O=new Date(o);O.setDate(o.getDate()+A);const H=O.toISOString().split("T")[0],Ct=O.getTime()===k.getTime(),$t=O.getMonth()===n,St=C.appointments.some(Tt=>Tt.starts_at.startsWith(H));b.push({date:H,day:O.getDate(),isToday:Ct,isCurrentMonth:$t,hasAppointments:St})}return b}),d=D(()=>{const s=new Date(p.value),n=s.getDay(),e=s.getDate()-n+(n===0?-6:1);s.setDate(e);const o=[];for(let b=0;b<7;b++){const k=new Date(s);k.setDate(s.getDate()+b),o.push({date:k.toISOString().split("T")[0],label:k.toLocaleDateString("en-US",{weekday:"short",day:"numeric"})})}return o}),_=D(()=>{let s=C.appointments;return B.value.length>0&&(s=s.filter(n=>{const e=n.booked_by_coordinator?.id;return e&&B.value.includes(e)})),M.value.length>0&&(s=s.filter(n=>{const e=n.appointment_type?.id;return e&&M.value.includes(e)})),s}),u=D(()=>{const s=d.value[0].date,n=d.value[6].date;return _.value.filter(e=>{const o=e.starts_at.split("T")[0];return o>=s&&o<=n})}),v=D(()=>{const s=p.value.toISOString().split("T")[0];return _.value.filter(n=>n.starts_at.startsWith(s)).sort((n,e)=>n.starts_at.localeCompare(e.starts_at))}),Y=D(()=>{if(y.value==="day")return p.value.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});if(y.value==="week"){const s=d.value[0].date,n=d.value[6].date,e=new Date(s),o=new Date(n);return e.getMonth()===o.getMonth()?`${e.toLocaleDateString("en-US",{month:"long",day:"numeric"})} - ${o.getDate()}, ${e.getFullYear()}`:`${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${o.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else return U.value}),ct=D(()=>{const s=new Date().toISOString().split("T")[0],n=p.value.toISOString().split("T")[0];return s===n}),L=S(null),Z=D(()=>{const s=new Date().toISOString().split("T")[0];return _.value.filter(n=>n.starts_at.startsWith(s)).sort((n,e)=>n.starts_at.localeCompare(e.starts_at)).slice(0,5)}),ut=D(()=>$.coordinators),mt=D(()=>[]),pt=D(()=>{const s=new Date,n=new Date(d.value[0].date),e=new Date(d.value[6].date);return s>=n&&s<=e}),tt=D(()=>{const s=new Date,n=s.getHours(),e=s.getMinutes();return(n*60+e-480)/60*64});function et(s){p.value=new Date(s)}function gt(){const s=new Date(p.value);s.setMonth(s.getMonth()-1),p.value=s}function vt(){const s=new Date(p.value);s.setMonth(s.getMonth()+1),p.value=s}function xt(s){return new Date(s).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function X(s){const n=new Date(s.starts_at),e=n.getHours(),o=n.getMinutes(),b=e>12?e-12:e,k=e>=12?"PM":"AM";return`${b}:${o.toString().padStart(2,"0")} ${k}`}function P(s){if(s.contact){const n=s.contact;return`${n.first_name} ${n.last_name||""}`.trim()||"Unknown"}return"Unknown"}function ft(s){return s.booked_by_coordinator?s.booked_by_coordinator.display_name||"Coordinator":"N/A"}function q(s){return s.appointment_type?s.appointment_type.name:s.title||"Appointment"}function R(s){const n=s.status.toLowerCase();return n==="confirmed"?"bg-blue-100 border-blue-200 text-blue-800":n==="pending"||n==="scheduled"?"bg-purple-100 border-purple-200 text-purple-800":n==="cancelled"?"bg-slate-100 border-slate-200 text-slate-600":"bg-amber-100 border-amber-200 text-amber-800"}function bt(s){const n=new Date(s.starts_at),e=new Date(s.ends_at),o=n.getHours()+n.getMinutes()/60,b=(e.getTime()-n.getTime())/(1e3*60*60),k=n.getDay(),A=k===0?7:k;return{top:(o-8)*64+"px",height:b*64+"px",gridColumnStart:A,gridColumnEnd:A+1}}function V(s){N.value=s,z.value=!0}function ht(s){return _.value.filter(n=>n.starts_at.startsWith(s)).slice(0,3)}function yt(s){const n=new Date(s.starts_at),e=new Date(s.ends_at),o=n.getHours()+n.getMinutes()/60,b=(e.getTime()-n.getTime())/(1e3*60*60);return{top:(o-8)*64+"px",height:b*64+"px"}}function _t(){const s=new Date(p.value);y.value==="day"?s.setDate(s.getDate()-1):y.value==="week"?s.setDate(s.getDate()-7):s.setMonth(s.getMonth()-1),p.value=s}function wt(){const s=new Date(p.value);y.value==="day"?s.setDate(s.getDate()+1):y.value==="week"?s.setDate(s.getDate()+7):s.setMonth(s.getMonth()+1),p.value=s}function kt(){p.value=new Date}function G(s,n){L.value=n,s.dataTransfer&&(s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",n.id))}async function Dt(s,n){if(s.preventDefault(),!L.value)return;const e=new Date(n),o=new Date(L.value.starts_at),k=new Date(L.value.ends_at).getTime()-o.getTime(),A=new Date(e);A.setHours(o.getHours(),o.getMinutes(),0,0);const O=new Date(A.getTime()+k);try{await C.updateAppointment(L.value.id,{starts_at:A.toISOString(),ends_at:O.toISOString()}),L.value=null}catch(H){console.error("Failed to update appointment:",H)}}return at(async()=>{f.currentOrganization||(await f.fetchOrganizations(),f.organizations.length>0&&f.setCurrentOrganization(f.organizations[0])),f.currentOrganization&&(await C.fetchAppointments(),await $.fetchCoordinators(f.currentOrganization.id))}),(s,n)=>(a(),l("div",be,[t("div",he,[n[6]||(n[6]=t("h1",{class:"text-3xl font-heading font-bold text-[#1B4F72]"},"Calendar",-1)),t("div",ye,[t("div",_e,[(a(),l(g,null,x(["Day","Week","Month"],e=>t("button",{key:e,onClick:o=>y.value=e.toLowerCase(),class:w(["px-4 py-1.5 rounded-md text-sm font-medium transition-all",y.value===e.toLowerCase()?"bg-white text-[#1B4F72] shadow-sm":"text-slate-500 hover:text-slate-700"])},r(e),11,we)),64))]),t("button",{onClick:n[0]||(n[0]=e=>I.value=!0),class:"px-4 py-2 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 flex items-center gap-2"},[h(m(lt),{size:18}),n[5]||(n[5]=j(" Manual Appointment ",-1))])])]),t("div",ke,[t("div",De,[t("div",Ce,[t("div",$e,[t("span",Se,r(U.value),1),t("div",Te,[t("button",{onClick:gt,class:"p-1 hover:bg-slate-100 rounded"},[h(m(J),{size:16})]),t("button",{onClick:vt,class:"p-1 hover:bg-slate-100 rounded"},[h(m(K),{size:16})])])]),t("div",Me,[(a(),l(g,null,x(["S","M","T","W","T","F","S"],e=>t("div",{key:e,class:"text-slate-400 font-medium"},r(e),1)),64))]),t("div",Ae,[(a(!0),l(g,null,x(i.value,e=>(a(),l("button",{key:e.date,onClick:o=>et(e.date),class:w(["w-7 h-7 rounded-full flex items-center justify-center hover:bg-slate-50 relative",e.isToday?"bg-[#1B4F72] text-white hover:bg-[#1B4F72]":"text-slate-700",e.isCurrentMonth?"":"text-slate-300"])},[j(r(e.day)+" ",1),e.hasAppointments?(a(),l("div",{key:0,class:w(["absolute bottom-1 w-1 h-1 rounded-full",e.isToday?"bg-white":"bg-[#1B4F72]"])},null,2)):T("",!0)],10,Be))),128))])]),t("div",Fe,[n[7]||(n[7]=t("h3",{class:"font-bold text-[#1B4F72] mb-4"},"Upcoming Today",-1)),t("div",ze,[(a(!0),l(g,null,x(Z.value,e=>(a(),l("div",{key:e.id,onClick:o=>V(e),class:"p-3 bg-slate-50 rounded-lg border border-slate-100 hover:border-[#1B4F72] transition-colors cursor-pointer"},[t("div",Ne,r(xt(e.starts_at)),1),t("div",Ue,r(P(e)),1),t("div",Le,r(q(e)),1)],8,Oe))),128)),Z.value.length===0?(a(),l("div",Ee," No appointments today ")):T("",!0)])]),t("div",je,[t("div",null,[n[8]||(n[8]=t("h4",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2"}," By Coordinator ",-1)),t("div",Ie,[(a(!0),l(g,null,x(ut.value,e=>(a(),l("label",{key:e.id,class:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer"},[st(t("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":n[1]||(n[1]=o=>B.value=o),class:"rounded text-[#1B4F72] focus:ring-[#1B4F72]"},null,8,Pe),[[nt,B.value]]),j(" "+r(e.display_name||e.role_template?.name||"N/A"),1)]))),128))])]),t("div",null,[n[9]||(n[9]=t("h4",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2"}," By Type ",-1)),t("div",Ve,[(a(!0),l(g,null,x(mt.value,e=>(a(),l("label",{key:e.id,class:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer"},[st(t("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":n[2]||(n[2]=o=>M.value=o),class:"rounded text-[#1B4F72] focus:ring-[#1B4F72]"},null,8,He),[[nt,M.value]]),j(" "+r(e.name),1)]))),128))])])])]),t("div",We,[t("div",Ye,[t("div",Xe,[t("button",{onClick:_t,class:"p-2 hover:bg-slate-100 rounded-lg transition-colors"},[h(m(J),{size:20})]),t("h2",qe,r(Y.value),1),t("button",{onClick:wt,class:"p-2 hover:bg-slate-100 rounded-lg transition-colors"},[h(m(K),{size:20})]),t("button",{onClick:kt,class:"px-3 py-1 text-sm text-slate-600 hover:bg-slate-100 rounded-lg transition-colors"}," Today ")])]),y.value==="day"?(a(),l("div",Re,[t("div",Ge,[t("div",Je,[(a(!0),l(g,null,x(m(F),e=>(a(),l("div",{key:e,class:"h-16 -mt-2.5"},r(e>12?e-12:e)+" "+r(e>=12?"PM":"AM"),1))),128))]),t("div",Ke,[(a(!0),l(g,null,x(m(F),e=>(a(),l("div",{key:e,class:"absolute w-full border-b border-slate-100 h-16",style:E({top:(e-8)*64+"px"})},null,4))),128)),ct.value?(a(),l("div",{key:0,class:"absolute w-full border-t-2 border-red-500 z-10",style:E({top:tt.value+"px"})},[...n[10]||(n[10]=[t("div",{class:"absolute -left-1.5 -top-1.5 w-3 h-3 rounded-full bg-red-500"},null,-1)])],4)):T("",!0),(a(!0),l(g,null,x(v.value,e=>(a(),l("div",{key:e.id,onClick:o=>V(e),draggable:"true",onDragstart:o=>G(o,e),class:w(["absolute left-1 right-1 rounded-md border p-2 text-xs cursor-move hover:shadow-md transition-shadow overflow-hidden",R(e)]),style:E(yt(e))},[t("div",Ze,r(X(e))+" - "+r(P(e)),1),t("div",ts,r(q(e)),1)],46,Qe))),128))])])])):y.value==="week"?(a(),l("div",es,[t("div",ss,[n[12]||(n[12]=t("div",{class:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50"},null,-1)),t("div",ns,[(a(!0),l(g,null,x(d.value,(e,o)=>(a(),l("div",{key:e.date,class:w(["py-3 text-center border-r border-slate-100 last:border-0",o===0?"bg-blue-50/30":""])},[t("div",{class:w(["text-sm font-medium",o===0?"text-[#1B4F72] font-bold":"text-slate-600"])},r(e.label),3)],2))),128))]),t("div",os,[(a(!0),l(g,null,x(m(F),e=>(a(),l("div",{key:e,class:"h-16 -mt-2.5"},r(e>12?e-12:e)+" "+r(e>=12?"PM":"AM"),1))),128))]),t("div",as,[(a(!0),l(g,null,x(m(F),e=>(a(),l("div",{key:e,class:"absolute w-full border-b border-slate-100 h-16",style:E({top:(e-8)*64+"px"})},null,4))),128)),(a(),l(g,null,x(7,e=>t("div",{key:e,class:"border-r border-slate-100 h-full relative"},[e===1&&pt.value?(a(),l("div",{key:0,class:"absolute w-full border-t-2 border-red-500 z-10",style:E({top:tt.value+"px"})},[...n[11]||(n[11]=[t("div",{class:"absolute -left-1.5 -top-1.5 w-3 h-3 rounded-full bg-red-500"},null,-1)])],4)):T("",!0)])),64)),(a(!0),l(g,null,x(u.value,e=>(a(),l("div",{key:e.id,onClick:o=>V(e),draggable:"true",onDragstart:o=>G(o,e),class:w(["absolute left-1 right-1 rounded-md border p-2 text-xs cursor-move hover:shadow-md transition-shadow overflow-hidden",R(e)]),style:E(bt(e))},[t("div",rs,r(X(e))+" - "+r(P(e)),1),t("div",is,r(q(e)),1),t("div",ds,[h(m(Nt),{size:10}),j(" "+r(ft(e)),1)])],46,ls))),128))])])])):y.value==="month"?(a(),l("div",cs,[t("div",us,[(a(),l(g,null,x(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=>t("div",{key:e,class:"text-center text-xs font-semibold text-slate-500 py-2"},r(e),1)),64))]),t("div",ms,[(a(!0),l(g,null,x(i.value,e=>(a(),l("div",{key:e.date,onClick:o=>et(e.date),onDrop:o=>Dt(o,e.date),onDragover:n[3]||(n[3]=W(()=>{},["prevent"])),class:w(["min-h-[100px] p-2 border border-slate-200 rounded-lg cursor-pointer transition-colors",e.isToday?"bg-blue-50 border-[#1B4F72]":"bg-white hover:bg-slate-50",e.isCurrentMonth?"":"opacity-40"])},[t("div",{class:w(["text-sm font-medium mb-1",e.isToday?"text-[#1B4F72] font-bold":"text-slate-700"])},r(e.day),3),t("div",gs,[(a(!0),l(g,null,x(ht(e.date),o=>(a(),l("div",{key:o.id,onClick:W(b=>V(o),["stop"]),draggable:"true",onDragstart:b=>G(b,o),class:w(["text-xs p-1 rounded truncate cursor-move",R(o)])},r(X(o))+" "+r(P(o)),43,vs))),128))])],42,ps))),128))])])):T("",!0)])]),h(dt,{appointment:N.value,"is-open":z.value,onClose:n[4]||(n[4]=e=>z.value=!1)},null,8,["appointment","is-open"])]))}}),fs={class:"space-y-6"},bs={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},hs={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between"},ys={class:"flex gap-2"},_s={class:"flex gap-2"},ws={key:0,class:"text-center py-12"},ks={key:2,class:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden"},Ds={class:"overflow-x-auto"},Cs={class:"w-full text-sm text-left"},$s={class:"divide-y divide-slate-100"},Ss=["onClick"],Ts={class:"px-6 py-4"},Ms={class:"font-medium text-slate-900"},As={class:"text-xs text-slate-500"},Bs={class:"px-6 py-4 font-medium text-slate-900"},Fs={class:"px-6 py-4 text-slate-600"},zs={class:"px-6 py-4 text-slate-600"},Os={class:"px-6 py-4"},Ns=["onClick"],Us={key:0},Ls={key:3,class:"bg-white rounded-xl border border-slate-200 shadow-sm p-6"},Gs=Q({__name:"AppointmentsPage",setup(c){const C=rt(),$=it(),f=S("list"),y=S(!1),p=jt,N=It,z=_=>Pt(_),I=_=>Vt(_,"N/A"),B=S(null),M=S(!1);function F(_){B.value=_,M.value=!0}function U(){}function i(){}function d(){}return at(async()=>{try{$.currentOrganization||(await $.fetchOrganizations(),$.organizations.length>0&&$.setCurrentOrganization($.organizations[0])),$.currentOrganization?.id&&await C.fetchAppointments()}catch(_){console.error("Failed to load appointments:",_)}}),(_,u)=>(a(),ot(At,null,{default:Mt(()=>[t("div",fs,[t("div",bs,[u[6]||(u[6]=t("div",null,[t("h1",{class:"text-3xl font-heading font-bold text-[#1B4F72]"}," Appointments "),t("p",{class:"text-slate-500 mt-1"},"Manage your calendar and appointments")],-1)),t("button",{onClick:u[0]||(u[0]=v=>y.value=!0),class:"px-5 py-2.5 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 flex items-center gap-2"},[h(m(lt),{size:18}),u[5]||(u[5]=j(" New Appointment ",-1))])]),t("div",hs,[t("div",ys,[t("button",{class:w(["px-4 py-2 rounded-lg font-medium transition-colors",f.value==="list"?"bg-[#1B4F72] text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"]),onClick:u[1]||(u[1]=v=>f.value="list")}," List View ",2),t("button",{class:w(["px-4 py-2 rounded-lg font-medium transition-colors",f.value==="calendar"?"bg-[#1B4F72] text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"]),onClick:u[2]||(u[2]=v=>f.value="calendar")}," Calendar View ",2)]),t("div",_s,[t("button",{onClick:U,class:"px-4 py-2 border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50"}," Today "),t("button",{onClick:i,class:"p-2 border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50"},[h(m(J),{size:16})]),t("button",{onClick:d,class:"p-2 border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50"},[h(m(K),{size:16})])])]),m(C).loading?(a(),l("div",ws,[...u[7]||(u[7]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#1B4F72]"},null,-1),t("p",{class:"mt-4 text-slate-500"},"Loading appointments...",-1)])])):f.value==="calendar"?(a(),ot(xs,{key:1})):f.value==="list"?(a(),l("div",ks,[t("div",Ds,[t("table",Cs,[u[9]||(u[9]=t("thead",{class:"bg-slate-50 text-slate-500 font-medium border-b border-slate-200"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Date/Time"),t("th",{class:"px-6 py-3"},"Contact"),t("th",{class:"px-6 py-3"},"Type"),t("th",{class:"px-6 py-3"},"Coordinator"),t("th",{class:"px-6 py-3"},"Status"),t("th",{class:"px-6 py-3 text-right"},"Actions")])],-1)),t("tbody",$s,[(a(!0),l(g,null,x(m(C).appointments,v=>(a(),l("tr",{key:v.id,class:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:Y=>F(v)},[t("td",Ts,[t("div",Ms,r(m(Et)(v.starts_at)),1),t("div",As,r(m(p)(v.starts_at,v.ends_at)),1)]),t("td",Bs,r(z(v)),1),t("td",Fs,r(v.appointment_type?.name||v.title),1),t("td",zs,r(I(v)),1),t("td",Os,[t("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",m(N)(v.status)])},r(v.status),3)]),t("td",{class:"px-6 py-4 text-right",onClick:u[3]||(u[3]=W(()=>{},["stop"]))},[t("button",{onClick:W(Y=>F(v),["stop"]),class:"p-1 text-slate-400 hover:text-[#1B4F72] rounded hover:bg-slate-100"},[h(m(Ut),{size:16})],8,Ns)])],8,Ss))),128)),m(C).appointments.length===0?(a(),l("tr",Us,[...u[8]||(u[8]=[t("td",{colspan:"6",class:"px-6 py-8 text-center text-slate-500"}," No appointments found ",-1)])])):T("",!0)])])])])):(a(),l("div",Ls,[...u[10]||(u[10]=[t("div",{class:"text-center text-slate-500 py-12"}," Calendar view coming soon ",-1)])]))]),h(dt,{appointment:B.value,"is-open":M.value,onClose:u[4]||(u[4]=v=>M.value=!1)},null,8,["appointment","is-open"])]),_:1}))}});export{Gs as default};
