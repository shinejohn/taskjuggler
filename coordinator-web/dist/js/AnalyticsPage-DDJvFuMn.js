import{_ as A}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-BFNf4mOZ.js";import{u as V}from"./calls-D05dn_Yj.js";import{u as O}from"./appointments-D9QkVc-G.js";import{u as P}from"./coordinators-CXVT1hhI.js";import{useOrganizationsStore as $}from"./organizations-BtYa45au.js";import{c as j}from"./format-DaYpM1Fu.js";import{s as E,C as N,o as b,f as T,S as _,a5 as M,am as R}from"./ui-vendor-o_tb4bfv.js";import{a as L,r as q,c as v,o as J,b as p,w as U,p as t,m as i,x as d,n as y,y as a,F as c,s as w,v as C,u,z as G,q as H,J as I,f as o}from"./vue-vendor-u6tZf2HN.js";import"./index-14mik_sv.js";import"./utils-vendor-B9ygI19o.js";const K={class:"space-y-6"},Q={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},W={class:"flex gap-3"},X={class:"flex bg-slate-100 p-1 rounded-lg"},Y=["onClick"],Z={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},tt={class:"flex items-center gap-2 mb-3"},st={class:"p-1.5 bg-blue-50 text-[#1B4F72] rounded-lg"},et={class:"text-xs font-medium text-slate-500"},ot={class:"flex items-end justify-between"},at={class:"text-2xl font-bold text-slate-900"},nt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},lt={class:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm"},it={class:"h-64 flex items-end justify-between gap-2"},rt=["title"],dt={key:0,class:"text-[10px] text-slate-400"},ct={class:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden"},pt={class:"overflow-x-auto"},ut={class:"w-full text-sm text-left"},mt={class:"divide-y divide-slate-100"},xt={class:"px-6 py-4 font-medium text-slate-900"},ft={class:"px-6 py-4 text-slate-600"},gt={class:"px-6 py-4 text-slate-600"},ht={class:"px-6 py-4"},bt={class:"font-semibold text-green-600"},_t={class:"px-6 py-4 text-slate-600 font-mono text-xs"},vt={class:"px-6 py-4"},yt={class:"flex items-center gap-1"},Pt=L({__name:"AnalyticsPage",setup(wt){const m=V(),x=O(),f=P(),r=$(),g=q("30days"),k=[{id:"7days",label:"7 Days"},{id:"30days",label:"30 Days"},{id:"90days",label:"90 Days"}],z=v(()=>{const l=m.stats;return[{label:"Total Calls",value:l?.total_calls||0,change:"+12%",trend:"up",icon:E},{label:"Appointments",value:x.appointments.length||0,change:"+8%",trend:"up",icon:N},{label:"Answer Rate",value:"94%",change:"+2%",trend:"up",icon:b},{label:"Avg Duration",value:D(l?.avg_duration||0),change:"-0:15",trend:"down",icon:T},{label:"Satisfaction",value:"4.7/5",change:"+0.2",trend:"up",icon:_}]}),S=[45,52,48,65,58,72,68,55,62,70,65,58,63,75],B=v(()=>f.coordinators.map(l=>({name:l.display_name||l.role_template?.name||"Coordinator",calls:0,appointments:0,conversion:0,avgDuration:"0:00",rating:4}))),D=j;function F(){}return J(async()=>{try{r.currentOrganization||(await r.fetchOrganizations(),r.organizations.length>0&&r.setCurrentOrganization(r.organizations[0])),r.currentOrganization?.id&&await Promise.all([m.fetchStats(),x.fetchAppointments(),f.fetchCoordinators()])}catch(l){console.error("Failed to load analytics:",l)}}),(l,e)=>(o(),p(A,null,{default:U(()=>[t("div",K,[t("div",Q,[e[1]||(e[1]=t("h1",{class:"text-3xl font-heading font-bold text-[#1B4F72]"}," Analytics ",-1)),t("div",W,[t("div",X,[(o(),i(c,null,d(k,s=>t("button",{key:s.id,onClick:n=>g.value=s.id,class:y(["px-3 py-1.5 rounded-md text-xs font-medium transition-all",g.value===s.id?"bg-white text-[#1B4F72] shadow-sm":"text-slate-500 hover:text-slate-700"])},a(s.label),11,Y)),64))]),t("button",{onClick:F,class:"px-4 py-2 border border-slate-200 text-slate-700 font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2"},[w(u(M),{size:18}),e[0]||(e[0]=C(" Export ",-1))])])]),t("div",Z,[(o(!0),i(c,null,d(z.value,(s,n)=>(o(),i("div",{key:n,class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm"},[t("div",tt,[t("div",st,[(o(),p(G(s.icon),{size:16}))]),t("span",et,a(s.label),1)]),t("div",ot,[t("div",at,a(s.value),1),t("div",{class:y(["flex items-center gap-1 text-xs font-medium",s.trend==="up"?"text-green-600":"text-red-600"])},[s.trend==="up"?(o(),p(u(b),{key:0,size:12})):(o(),p(u(R),{key:1,size:12})),C(" "+a(s.change),1)],2)])]))),128))]),t("div",nt,[t("div",lt,[e[2]||(e[2]=t("h3",{class:"text-lg font-bold text-[#1B4F72] mb-4"},"Call Volume",-1)),t("div",it,[(o(),i(c,null,d(S,(s,n)=>t("div",{key:n,class:"flex-1 flex flex-col items-center gap-1"},[t("div",{class:"w-full bg-gradient-to-t from-[#1B4F72] to-blue-400 rounded-t-sm hover:opacity-80 transition-opacity cursor-pointer",style:I({height:`${s}%`}),title:`Day ${n+1}: ${Math.round(s*1.5)} calls`},null,12,rt),n%2===0?(o(),i("span",dt,a(n+1),1)):H("",!0)])),64))]),e[3]||(e[3]=t("div",{class:"flex justify-center gap-6 mt-4 text-xs text-slate-500"},[t("span",null,"Last 14 days")],-1))]),e[4]||(e[4]=t("div",{class:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm"},[t("h3",{class:"text-lg font-bold text-[#1B4F72] mb-4"},"Appointment Conversion"),t("div",{class:"h-64 flex items-center justify-center"},[t("div",{class:"text-center"},[t("div",{class:"text-4xl font-bold text-[#1B4F72] mb-2"},"68%"),t("p",{class:"text-slate-500 text-sm"},"Calls â†’ Appointments")])])],-1))]),t("div",ct,[e[6]||(e[6]=t("div",{class:"p-6 border-b border-slate-100"},[t("h3",{class:"text-lg font-bold text-[#1B4F72]"},"Coordinator Performance")],-1)),t("div",pt,[t("table",ut,[e[5]||(e[5]=t("thead",{class:"bg-slate-50 text-slate-500 font-medium border-b border-slate-100"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Coordinator"),t("th",{class:"px-6 py-3"},"Calls"),t("th",{class:"px-6 py-3"},"Appointments"),t("th",{class:"px-6 py-3"},"Conversion"),t("th",{class:"px-6 py-3"},"Avg Duration"),t("th",{class:"px-6 py-3"},"Satisfaction")])],-1)),t("tbody",mt,[(o(!0),i(c,null,d(B.value,(s,n)=>(o(),i("tr",{key:n,class:"hover:bg-slate-50 transition-colors"},[t("td",xt,a(s.name),1),t("td",ft,a(s.calls),1),t("td",gt,a(s.appointments),1),t("td",ht,[t("span",bt,a(s.conversion)+"%",1)]),t("td",_t,a(s.avgDuration),1),t("td",vt,[t("div",yt,[(o(),i(c,null,d(5,h=>w(u(_),{key:h,size:14,fill:h<=s.rating?"#F59E0B":"none",class:"text-[#F59E0B]"},null,8,["fill"])),64))])])]))),128))])])])])])]),_:1}))}});export{Pt as default};
