import{a as F,r as u,c as B,o as z,b as x,w as S,p as t,m as d,q as w,s as m,v as N,u as l,y,B as v,C as O,a2 as C,F as h,x as $,A as V,f as a}from"./vue-vendor-BFreJ1An.js";import{_ as M}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CfYC6v2a.js";import{_ as A}from"./CoordinatorCard.vue_vue_type_script_setup_true_lang-BdpU3jp6.js";import{u as L}from"./coordinators-cKpivT3u.js";import{useOrganizationsStore as j}from"./organizations-BeLDuyV9.js";import{a5 as D,a9 as E,aa as _}from"./ui-vendor-DelVp1tp.js";import"./index-CMI_8iS_.js";import"./index-BsTtUH7V.js";import"./utils-vendor-B9ygI19o.js";const U={class:"space-y-8"},H={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},P={key:0,class:"text-center py-12"},R={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700"},q={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 justify-between items-center"},I={class:"relative w-full md:w-96"},T={class:"flex gap-3 w-full md:w-auto"},Y={class:"relative flex-1 md:flex-none"},Q={class:"relative flex-1 md:flex-none"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},J={key:0,class:"text-center py-12 bg-white rounded-xl border border-slate-200"},K={class:"flex gap-3 justify-end"},W=["disabled"],ie=F({__name:"CoordinatorsPage",setup(X){const n=L(),s=j(),p=u(""),g=u(""),c=u(""),i=u(!1),f=u(!1),b=B(()=>{let r=n.coordinators;if(p.value){const e=p.value.toLowerCase();r=r.filter(o=>(o.display_name||"").toLowerCase().includes(e)||(o.role_template?.name||"").toLowerCase().includes(e))}return c.value&&(r=r.filter(e=>e.status===c.value)),r});async function k(){f.value=!0;try{if(!s.currentOrganization?.id)throw new Error("No organization selected");await n.createCoordinator(s.currentOrganization.id,{role_template_id:"",persona_template_id:""}),i.value=!1}catch(r){console.error("Failed to create coordinator:",r)}finally{f.value=!1}}return z(async()=>{try{s.currentOrganization||(await s.fetchOrganizations(),s.organizations.length>0&&s.setCurrentOrganization(s.organizations[0])),s.currentOrganization?.id&&await n.fetchCoordinators()}catch(r){console.error("Failed to load coordinators:",r)}}),(r,e)=>(a(),x(M,null,{default:S(()=>[t("div",U,[t("div",H,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-3xl font-heading font-bold text-[#1B4F72]"}," Your Coordinators "),t("p",{class:"text-slate-500 mt-1"},"Manage your AI assistant team")],-1)),t("button",{onClick:e[0]||(e[0]=o=>i.value=!0),class:"px-5 py-2.5 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 flex items-center gap-2"},[m(l(D),{size:18}),e[8]||(e[8]=N(" Hire New Coordinator ",-1))])]),l(n).loading?(a(),d("div",P,[...e[10]||(e[10]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#1B4F72]"},null,-1),t("p",{class:"mt-4 text-slate-500"},"Loading coordinators...",-1)])])):l(n).error?(a(),d("div",R,y(l(n).error),1)):(a(),d(h,{key:2},[t("div",q,[t("div",I,[m(l(E),{class:"absolute left-3 top-2.5 text-slate-400",size:20}),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>p.value=o),type:"text",placeholder:"Search coordinators...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-[#1B4F72]/20 focus:border-[#1B4F72]"},null,512),[[O,p.value]])]),t("div",T,[t("div",Y,[v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),class:"w-full appearance-none pl-4 pr-10 py-2 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#1B4F72]/20 focus:border-[#1B4F72] cursor-pointer"},[...e[11]||(e[11]=[t("option",{value:""},"All Roles",-1),t("option",{value:"inbound"},"Inbound",-1),t("option",{value:"outbound"},"Outbound",-1)])],512),[[C,g.value]]),m(l(_),{class:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:16})]),t("div",Q,[v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>c.value=o),class:"w-full appearance-none pl-4 pr-10 py-2 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#1B4F72]/20 focus:border-[#1B4F72] cursor-pointer"},[...e[12]||(e[12]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"paused"},"Paused",-1)])],512),[[C,c.value]]),m(l(_),{class:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:16})])])]),t("div",G,[(a(!0),d(h,null,$(b.value,o=>(a(),x(A,{key:o.id,id:o.id,name:o.display_name||o.role_template?.name||"Coordinator",role:o.role_template?.name||"Unknown Role",status:o.status==="active"?"active":"paused",price:`$${o.monthly_price}/mo`},null,8,["id","name","role","status","price"]))),128))]),b.value.length===0?(a(),d("div",J,[e[13]||(e[13]=t("p",{class:"text-slate-500 mb-4"},"No coordinators found",-1)),t("button",{onClick:e[4]||(e[4]=o=>i.value=!0),class:"px-5 py-2.5 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg"}," Hire Your First Coordinator ")])):w("",!0)],64))]),i.value?(a(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[7]||(e[7]=o=>i.value=!1)},[t("div",{class:"bg-white rounded-xl p-8 max-w-md w-full mx-4",onClick:e[6]||(e[6]=V(()=>{},["stop"]))},[e[14]||(e[14]=t("h3",{class:"text-2xl font-bold text-[#1B4F72] mb-6"},"Hire New Coordinator",-1)),e[15]||(e[15]=t("p",{class:"text-slate-600 mb-6"},"Select a role template to create a new coordinator",-1)),t("div",K,[t("button",{onClick:e[5]||(e[5]=o=>i.value=!1),class:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50"}," Cancel "),t("button",{onClick:k,disabled:f.value,class:"px-4 py-2 bg-[#1B4F72] text-white rounded-lg hover:bg-[#153e5a] disabled:opacity-50"},y(f.value?"Creating...":"Create"),9,W)])])])):w("",!0)]),_:1}))}});export{ie as default};
