import{a as F,o as z,b as x,w as B,p as t,m as d,q as w,r as u,s as m,v as S,u as r,y,D as v,I as N,a4 as C,F as h,x as O,c as $,A as V,f as a}from"./vue-vendor-lZgBCM-Y.js";import{_ as M}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DdJPjlAv.js";import{_ as A}from"./CoordinatorCard.vue_vue_type_script_setup_true_lang-yINn1rD-.js";import{u as D}from"./coordinators-BfbYYedD.js";import{useOrganizationsStore as L}from"./organizations-CvdzM5JO.js";import{aa as j,ae as E,af as _}from"./ui-vendor-XL1sGzTt.js";import"./index-C8fGv0Lo.js";import"./utils-vendor-D5GkNzM3.js";import"./index-DjyVIXzc.js";import"./CardContent.vue_vue_type_script_setup_true_lang-BV8KmGM6.js";import"./index-C1AbbWbk.js";const U={class:"space-y-8"},H={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},I={key:0,class:"text-center py-12"},P={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700"},R={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 justify-between items-center"},q={class:"relative w-full md:w-96"},T={class:"flex gap-3 w-full md:w-auto"},Y={class:"relative flex-1 md:flex-none"},Q={class:"relative flex-1 md:flex-none"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},J={key:0,class:"text-center py-12 bg-white rounded-xl border border-slate-200"},K={class:"flex gap-3 justify-end"},W=["disabled"],ue=F({__name:"CoordinatorsPage",setup(X){const n=D(),l=L(),p=u(""),g=u(""),f=u(""),i=u(!1),c=u(!1),b=$(()=>{let s=n.coordinators;if(p.value){const e=p.value.toLowerCase();s=s.filter(o=>(o.display_name||"").toLowerCase().includes(e)||(o.role_template?.name||"").toLowerCase().includes(e))}return f.value&&(s=s.filter(e=>e.status===f.value)),s});async function k(){c.value=!0;try{if(!l.currentOrganization?.id)throw new Error("No organization selected");await n.createCoordinator(l.currentOrganization.id,{role_template_id:"",persona_template_id:""}),i.value=!1}catch(s){console.error("Failed to create coordinator:",s)}finally{c.value=!1}}return z(async()=>{try{l.currentOrganization||(await l.fetchOrganizations(),l.organizations.length>0&&l.setCurrentOrganization(l.organizations[0])),l.currentOrganization?.id&&await n.fetchCoordinators()}catch(s){console.error("Failed to load coordinators:",s)}}),(s,e)=>(a(),x(M,null,{default:B(()=>[t("div",U,[t("div",H,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-3xl font-heading font-bold text-[#1B4F72]"}," Your 4 Calls "),t("p",{class:"text-slate-500 mt-1"},"Manage your AI assistant team")],-1)),t("button",{onClick:e[0]||(e[0]=o=>i.value=!0),class:"px-5 py-2.5 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 flex items-center gap-2"},[m(r(j),{size:18}),e[8]||(e[8]=S(" Hire New 4 Call ",-1))])]),r(n).loading?(a(),d("div",I,[...e[10]||(e[10]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#1B4F72]"},null,-1),t("p",{class:"mt-4 text-slate-500"},"Loading 4 Calls...",-1)])])):r(n).error?(a(),d("div",P,y(r(n).error),1)):(a(),d(h,{key:2},[t("div",R,[t("div",q,[m(r(E),{class:"absolute left-3 top-2.5 text-slate-400",size:20}),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>p.value=o),type:"text",placeholder:"Search 4 Calls...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-[#1B4F72]/20 focus:border-[#1B4F72]"},null,512),[[N,p.value]])]),t("div",T,[t("div",Y,[v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),class:"w-full appearance-none pl-4 pr-10 py-2 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#1B4F72]/20 focus:border-[#1B4F72] cursor-pointer"},[...e[11]||(e[11]=[t("option",{value:""},"All Roles",-1),t("option",{value:"inbound"},"Inbound",-1),t("option",{value:"outbound"},"Outbound",-1)])],512),[[C,g.value]]),m(r(_),{class:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:16})]),t("div",Q,[v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),class:"w-full appearance-none pl-4 pr-10 py-2 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#1B4F72]/20 focus:border-[#1B4F72] cursor-pointer"},[...e[12]||(e[12]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"paused"},"Paused",-1)])],512),[[C,f.value]]),m(r(_),{class:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:16})])])]),t("div",G,[(a(!0),d(h,null,O(b.value,o=>(a(),x(A,{key:o.id,id:o.id,name:o.display_name||o.role_template?.name||"4 Call",role:o.role_template?.name||"Unknown Role",status:o.status==="active"?"active":"paused",price:`$${o.monthly_price}/mo`},null,8,["id","name","role","status","price"]))),128))]),b.value.length===0?(a(),d("div",J,[e[13]||(e[13]=t("p",{class:"text-slate-500 mb-4"},"No 4 Calls found",-1)),t("button",{onClick:e[4]||(e[4]=o=>i.value=!0),class:"px-5 py-2.5 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg"}," Hire Your First 4 Call ")])):w("",!0)],64))]),i.value?(a(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[7]||(e[7]=o=>i.value=!1)},[t("div",{class:"bg-white rounded-xl p-8 max-w-md w-full mx-4",onClick:e[6]||(e[6]=V(()=>{},["stop"]))},[e[14]||(e[14]=t("h3",{class:"text-2xl font-bold text-[#1B4F72] mb-6"},"Hire New 4 Call",-1)),e[15]||(e[15]=t("p",{class:"text-slate-600 mb-6"},"Select a role template to create a new 4 Call",-1)),t("div",K,[t("button",{onClick:e[5]||(e[5]=o=>i.value=!1),class:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50"}," Cancel "),t("button",{onClick:k,disabled:c.value,class:"px-4 py-2 bg-[#1B4F72] text-white rounded-lg hover:bg-[#153e5a] disabled:opacity-50"},y(c.value?"Creating...":"Create"),9,W)])])])):w("",!0)]),_:1}))}});export{ue as default};
