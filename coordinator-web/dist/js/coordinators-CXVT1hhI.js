const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/organizations-BtYa45au.js","js/vue-vendor-u6tZf2HN.js","js/index-14mik_sv.js","js/utils-vendor-B9ygI19o.js","css/index-D_FGnhmv.css"])))=>i.map(i=>d[i]);
import{a as l,_ as w}from"./index-14mik_sv.js";import{d as m,r as c,c as z}from"./vue-vendor-u6tZf2HN.js";const u={getByOrganization:e=>l.get(`/coordinator/organizations/${e}/coordinators`),getById:e=>l.get(`/coordinator/coordinators/${e}`),create:(e,i)=>l.post(`/coordinator/organizations/${e}/coordinators`,i),update:(e,i)=>l.put(`/coordinator/coordinators/${e}`,i),delete:e=>l.delete(`/coordinator/coordinators/${e}`)},O=m("coordinators",()=>{const e=c([]),i=c(null),r=c(!1),n=c(null),v=z(()=>e.value.filter(t=>t.status==="active"));async function f(t){r.value=!0,n.value=null;try{if(!t){const{useOrganizationsStore:o}=await w(async()=>{const{useOrganizationsStore:d}=await import("./organizations-BtYa45au.js");return{useOrganizationsStore:d}},__vite__mapDeps([0,1,2,3,4])),s=o();if(!s.currentOrganization?.id)throw new Error("No organization selected");t=s.currentOrganization.id}const a=await u.getByOrganization(t);e.value=a.data}catch(a){throw n.value=a.response?.data?.message||"Failed to load coordinators",a}finally{r.value=!1}}async function p(t){r.value=!0,n.value=null;try{const a=await u.getById(t);return i.value=a.data,a.data}catch(a){throw n.value=a.response?.data?.message||"Failed to load coordinator",a}finally{r.value=!1}}async function g(t,a){r.value=!0,n.value=null;try{const o=await u.create(t,a);return e.value.push(o.data),o.data}catch(o){throw n.value=o.response?.data?.message||"Failed to create coordinator",o}finally{r.value=!1}}async function y(t,a){r.value=!0,n.value=null;try{const o=await u.update(t,a),s=e.value.findIndex(d=>d.id===t);return s!==-1&&(e.value[s]=o.data),i.value?.id===t&&(i.value=o.data),o.data}catch(o){throw n.value=o.response?.data?.message||"Failed to update coordinator",o}finally{r.value=!1}}async function h(t){r.value=!0,n.value=null;try{await u.delete(t),e.value=e.value.filter(a=>a.id!==t),i.value?.id===t&&(i.value=null)}catch(a){throw n.value=a.response?.data?.message||"Failed to delete coordinator",a}finally{r.value=!1}}return{coordinators:e,currentCoordinator:i,loading:r,error:n,activeCoordinators:v,fetchCoordinators:f,fetchCoordinator:p,createCoordinator:g,updateCoordinator:y,deleteCoordinator:h}});export{O as u};
