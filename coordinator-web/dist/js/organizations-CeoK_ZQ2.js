import{d as y,c as m,r as l}from"./vue-vendor-lZgBCM-Y.js";import{a as s,c as O}from"./index-DMcm1eEm.js";import"./utils-vendor-D5GkNzM3.js";const c={getAll:()=>s.get("/coordinator/organizations"),getById:a=>s.get(`/coordinator/organizations/${a}`),create:a=>s.post("/coordinator/organizations",a),update:(a,i)=>s.put(`/coordinator/organizations/${a}`,i),delete:a=>s.delete(`/coordinator/organizations/${a}`)},F=y("organizations",()=>{const a=l([]),i=l(null),o=l(!1),r=l(null),g=m(()=>a.value.length>0);async function v(e=!1){if(!(!e&&a.value.length>0)){o.value=!0,r.value=null;try{const t=await c.getAll();a.value=t.data.data||t.data}catch(t){throw r.value=t.response?.data?.message||"Failed to load organizations",t}finally{o.value=!1}}}async function f(e){o.value=!0,r.value=null;try{const t=await c.create(e),n=t.data.data||t.data;return a.value.push(n),n}catch(t){throw r.value=t.response?.data?.message||"Failed to create organization",t}finally{o.value=!1}}async function p(e,t){o.value=!0,r.value=null;try{const n=await c.update(e,t),u=n.data.data||n.data,d=a.value.findIndex(h=>h.id===e);return d!==-1&&(a.value[d]=u),i.value?.id===e&&(i.value=u),O.invalidate("/coordinator/organizations"),u}catch(n){throw r.value=n.response?.data?.message||"Failed to update organization",n}finally{o.value=!1}}function z(e){i.value=e}return{organizations:a,currentOrganization:i,loading:o,error:r,hasOrganizations:g,fetchOrganizations:v,createOrganization:f,updateOrganization:p,setCurrentOrganization:z}});export{F as useOrganizationsStore};
