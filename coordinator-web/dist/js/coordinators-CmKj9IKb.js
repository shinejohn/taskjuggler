const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/organizations-CeoK_ZQ2.js","js/vue-vendor-lZgBCM-Y.js","js/index-DMcm1eEm.js","js/utils-vendor-D5GkNzM3.js","css/index-wol-ho6g.css"])))=>i.map(i=>d[i]);
import{a as l,b as m}from"./index-DMcm1eEm.js";import{d as z,c as C,r as c}from"./vue-vendor-lZgBCM-Y.js";const u={getByOrganization:t=>l.get(`/coordinator/organizations/${t}/coordinators`),getById:t=>l.get(`/coordinator/coordinators/${t}`),create:(t,s)=>l.post(`/coordinator/organizations/${t}/coordinators`,s),update:(t,s)=>l.put(`/coordinator/coordinators/${t}`,s),delete:t=>l.delete(`/coordinator/coordinators/${t}`)},F=z("coordinators",()=>{const t=c([]),s=c(null),r=c(!1),n=c(null),v=C(()=>t.value.filter(e=>e.status==="active"));async function f(e){r.value=!0,n.value=null;try{if(!e){const{useOrganizationsStore:o}=await m(async()=>{const{useOrganizationsStore:d}=await import("./organizations-CeoK_ZQ2.js");return{useOrganizationsStore:d}},__vite__mapDeps([0,1,2,3,4])),i=o();if(!i.currentOrganization?.id)throw new Error("No organization selected");e=i.currentOrganization.id}const a=await u.getByOrganization(e);t.value=a.data.data||a.data}catch(a){throw n.value=a.response?.data?.message||"Failed to load coordinators",a}finally{r.value=!1}}async function p(e){r.value=!0,n.value=null;try{const a=await u.getById(e),o=a.data.data||a.data;return s.value=o,o}catch(a){throw n.value=a.response?.data?.message||"Failed to load coordinator",a}finally{r.value=!1}}async function g(e,a){r.value=!0,n.value=null;try{const o=await u.create(e,a),i=o.data.data||o.data;return t.value.push(i),i}catch(o){throw n.value=o.response?.data?.message||"Failed to create coordinator",o}finally{r.value=!1}}async function y(e,a){r.value=!0,n.value=null;try{const o=await u.update(e,a),i=o.data.data||o.data,d=t.value.findIndex(w=>w.id===e);return d!==-1&&(t.value[d]=i),s.value?.id===e&&(s.value=i),i}catch(o){throw n.value=o.response?.data?.message||"Failed to update coordinator",o}finally{r.value=!1}}async function h(e){r.value=!0,n.value=null;try{await u.delete(e),t.value=t.value.filter(a=>a.id!==e),s.value?.id===e&&(s.value=null)}catch(a){throw n.value=a.response?.data?.message||"Failed to delete coordinator",a}finally{r.value=!1}}return{coordinators:t,currentCoordinator:s,loading:r,error:n,activeCoordinators:v,fetchCoordinators:f,fetchCoordinator:p,createCoordinator:g,updateCoordinator:y,deleteCoordinator:h}});export{F as u};
