import{d as h,r as l,c as y}from"./vue-vendor-BFreJ1An.js";import{a as s,b as m}from"./index-BsTtUH7V.js";import"./utils-vendor-B9ygI19o.js";const u={getAll:()=>s.get("/coordinator/organizations"),getById:a=>s.get(`/coordinator/organizations/${a}`),create:a=>s.post("/coordinator/organizations",a),update:(a,r)=>s.put(`/coordinator/organizations/${a}`,r),delete:a=>s.delete(`/coordinator/organizations/${a}`)},A=h("organizations",()=>{const a=l([]),r=l(null),n=l(!1),o=l(null),d=y(()=>a.value.length>0);async function g(e=!1){if(!(!e&&a.value.length>0)){n.value=!0,o.value=null;try{const t=await u.getAll();a.value=t.data}catch(t){throw o.value=t.response?.data?.message||"Failed to load organizations",t}finally{n.value=!1}}}async function v(e){n.value=!0,o.value=null;try{const t=await u.create(e);return a.value.push(t.data),t.data}catch(t){throw o.value=t.response?.data?.message||"Failed to create organization",t}finally{n.value=!1}}async function f(e,t){n.value=!0,o.value=null;try{const i=await u.update(e,t),c=a.value.findIndex(z=>z.id===e);return c!==-1&&(a.value[c]=i.data),r.value?.id===e&&(r.value=i.data),m.invalidate("/coordinator/organizations"),i.data}catch(i){throw o.value=i.response?.data?.message||"Failed to update organization",i}finally{n.value=!1}}function p(e){r.value=e}return{organizations:a,currentOrganization:r,loading:n,error:o,hasOrganizations:d,fetchOrganizations:g,createOrganization:v,updateOrganization:f,setCurrentOrganization:p}});export{A as useOrganizationsStore};
