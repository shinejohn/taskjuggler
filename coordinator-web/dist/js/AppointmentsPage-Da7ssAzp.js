import{a as K,m as l,F as g,q as S,p as t,n as _,y as r,s as h,u,f as a,o as at,x as f,r as C,v as j,c as k,D as st,E as nt,Z as L,A as W,b as ot,w as Bt}from"./vue-vendor-lZgBCM-Y.js";import{_ as Ft}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-B_Gh6zTT.js";import{X as zt,f as Ot,z as Nt,h as Et,aa as lt,al as G,am as J,c as Ut,ag as Lt}from"./ui-vendor-XL1sGzTt.js";import{u as it}from"./appointments-rneqqU1D.js";import{u as jt}from"./coordinators-CmKj9IKb.js";import{useOrganizationsStore as rt}from"./organizations-CeoK_ZQ2.js";import{a as It,b as Pt}from"./format-DaYpM1Fu.js";import{g as Vt}from"./status-DdzIA5VN.js";import{g as Ht,a as Wt}from"./contact-CkUglU_H.js";import"./index-DMcm1eEm.js";import"./utils-vendor-D5GkNzM3.js";const Yt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none"},qt={class:"bg-white rounded-xl shadow-2xl w-full max-w-lg pointer-events-auto"},Rt={class:"flex justify-between items-start p-6 border-b border-slate-100"},Xt={class:"flex items-center gap-2 mb-2"},Zt={class:"px-2.5 py-0.5 rounded-full bg-blue-50 text-[#1B4F72] text-xs font-medium"},Gt={class:"text-2xl font-bold text-slate-900"},Jt={class:"p-6 space-y-6"},Kt={class:"flex items-center gap-3 text-lg"},Qt={class:"p-2 bg-slate-100 rounded-lg text-slate-500"},te={class:"font-bold text-slate-900"},ee={class:"text-sm text-slate-500"},se={class:"space-y-3 p-4 bg-slate-50 rounded-xl border border-slate-100"},ne={class:"flex items-center justify-between"},oe={class:"flex items-center gap-3"},ae={class:"font-medium text-slate-700"},le={class:"flex items-center justify-between"},ie={class:"flex items-center gap-3"},re={class:"font-medium text-slate-700"},de={class:"flex items-center justify-between text-sm"},ce={class:"flex items-center gap-2"},ue={class:"w-8 h-8 rounded-full bg-blue-100 text-[#1B4F72] flex items-center justify-center font-bold text-xs"},me={class:"font-medium text-slate-900"},pe={class:"text-right"},ge={class:"font-medium text-slate-900"},fe={key:0},ve={class:"text-sm text-slate-700"},xe={key:1},be={class:"text-sm text-slate-700"},he={class:"flex gap-3 pt-4 border-t border-slate-100"},dt=K({__name:"AppointmentModal",props:{appointment:{},isOpen:{type:Boolean}},emits:["close","cancel","edit"],setup(c,{emit:D}){const y=c,v=D;function b(d){return new Date(d).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function m(d){return new Date(d).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})}function O(d){if(d.contact){const i=d.contact;return`${i.first_name} ${i.last_name||""}`.trim()||"Unknown"}return"Unknown"}function B(d){return d.contact&&d.contact.phone||"(555) 234-5678"}function I(d){return d.contact&&d.contact.email||"email@example.com"}function T(d){return d.coordinator?d.coordinator.display_name||"4 Call":"N/A"}function A(d){return T(d).charAt(0).toUpperCase()}function F(d){return d.appointment_type?d.appointment_type.name:d.title||"Appointment"}function N(d){return{confirmed:"bg-green-100 text-green-700",scheduled:"bg-blue-100 text-blue-700",pending:"bg-amber-100 text-amber-700",cancelled:"bg-red-100 text-red-700",completed:"bg-slate-100 text-slate-600"}[d]||"bg-slate-100 text-slate-600"}function E(){y.appointment&&v("cancel",y.appointment)}function $(){y.appointment&&v("edit",y.appointment)}return(d,i)=>(a(),l(g,null,[c.isOpen?(a(),l("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 transition-opacity",onClick:i[0]||(i[0]=p=>d.$emit("close"))})):S("",!0),c.isOpen&&c.appointment?(a(),l("div",Yt,[t("div",qt,[t("div",Rt,[t("div",null,[t("div",Xt,[t("span",{class:_(["px-2.5 py-0.5 rounded-full text-xs font-medium",N(c.appointment.status)])},r(c.appointment.status.charAt(0).toUpperCase()+c.appointment.status.slice(1)),3),t("span",Zt,r(F(c.appointment)),1)]),t("h2",Gt,r(O(c.appointment)),1)]),t("button",{onClick:i[1]||(i[1]=p=>d.$emit("close")),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors"},[h(u(zt),{size:20})])]),t("div",Jt,[t("div",Kt,[t("div",Qt,[h(u(Ot),{size:20})]),t("div",null,[t("div",te,r(b(c.appointment.starts_at))+" - "+r(b(c.appointment.ends_at)),1),t("div",ee,r(m(c.appointment.starts_at)),1)])]),t("div",se,[t("div",ne,[t("div",oe,[h(u(Nt),{size:16,class:"text-slate-400"}),t("span",ae,r(B(c.appointment)),1)]),i[2]||(i[2]=t("button",{class:"text-xs font-medium text-[#1B4F72] hover:underline"}," Call ",-1))]),t("div",le,[t("div",ie,[h(u(Et),{size:16,class:"text-slate-400"}),t("span",re,r(I(c.appointment)),1)]),i[3]||(i[3]=t("button",{class:"text-xs font-medium text-[#1B4F72] hover:underline"}," Email ",-1))])]),t("div",de,[t("div",ce,[t("div",ue,r(A(c.appointment)),1),t("div",null,[i[4]||(i[4]=t("div",{class:"text-slate-500 text-xs"},"Booked by",-1)),t("div",me,r(T(c.appointment)),1)])]),t("div",pe,[i[5]||(i[5]=t("div",{class:"text-slate-500 text-xs"},"Booked on",-1)),t("div",ge,r(m(c.appointment.created_at)),1)])]),c.appointment.description?(a(),l("div",fe,[i[6]||(i[6]=t("h3",{class:"text-sm font-bold text-slate-900 mb-2"},"Description",-1)),t("p",ve,r(c.appointment.description),1)])):S("",!0),c.appointment.notes?(a(),l("div",xe,[i[7]||(i[7]=t("h3",{class:"text-sm font-bold text-slate-900 mb-2"},"Notes",-1)),t("p",be,r(c.appointment.notes),1)])):S("",!0),t("div",he,[c.appointment.status!=="cancelled"?(a(),l("button",{key:0,onClick:E,class:"flex-1 py-2.5 border border-red-200 text-red-600 font-medium rounded-lg hover:bg-red-50 transition-colors"}," Cancel Appointment ")):S("",!0),t("button",{onClick:$,class:"flex-1 py-2.5 bg-[#1B4F72] text-white font-medium rounded-lg hover:bg-[#153e5a] transition-colors"}," Edit Details ")])])])])):S("",!0)],64))}}),ye={class:"h-[calc(100vh-200px)] flex flex-col"},_e={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},we={class:"flex items-center gap-4"},ke={class:"flex bg-slate-100 p-1 rounded-lg"},De=["onClick"],Ce={class:"flex flex-1 gap-6 overflow-hidden"},$e={class:"w-64 flex-shrink-0 flex flex-col gap-6 overflow-y-auto pr-2"},Se={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm"},Te={class:"flex justify-between items-center mb-4"},Ae={class:"font-bold text-slate-900"},Me={class:"flex gap-1"},Be={class:"grid grid-cols-7 gap-1 text-center text-xs mb-2"},Fe={class:"grid grid-cols-7 gap-1 text-center text-sm"},ze=["onClick"],Oe={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex-1"},Ne={class:"space-y-3"},Ee=["onClick"],Ue={class:"text-xs font-bold text-[#1B4F72] mb-1"},Le={class:"font-medium text-slate-900 text-sm"},je={class:"text-xs text-slate-500"},Ie={key:0,class:"text-sm text-slate-500 text-center py-4"},Pe={class:"space-y-4"},Ve={class:"space-y-2"},He=["value"],We={class:"space-y-2"},Ye=["value"],qe={class:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col"},Re={class:"flex items-center justify-between border-b border-slate-200 p-4"},Xe={class:"flex items-center gap-4"},Ze={class:"text-lg font-bold text-[#1B4F72]"},Ge={key:0,class:"flex-1 overflow-y-auto relative"},Je={class:"flex min-h-[600px]"},Ke={class:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50 text-xs text-slate-500 font-medium text-right pr-2 pt-2"},Qe={class:"flex-1 relative"},ts=["onClick","onDragstart"],es={class:"font-bold truncate"},ss={class:"truncate opacity-80"},ns={key:1,class:"flex-1 overflow-y-auto relative"},os={class:"flex min-h-[600px]"},as={class:"flex-1 grid grid-cols-7 border-b border-slate-200"},ls={class:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50 text-xs text-slate-500 font-medium text-right pr-2 pt-2"},is={class:"flex-1 grid grid-cols-7 relative"},rs=["onClick","onDragstart"],ds={class:"font-bold truncate"},cs={class:"truncate opacity-80"},us={class:"flex items-center gap-1 mt-1 opacity-70"},ms={key:2,class:"flex-1 overflow-y-auto p-4"},ps={class:"grid grid-cols-7 gap-1 mb-2"},gs={class:"grid grid-cols-7 gap-1"},fs=["onClick","onDrop"],vs={class:"space-y-1"},xs=["onClick","onDragstart"],bs=K({__name:"CalendarView",setup(c){const D=it(),y=jt(),v=rt(),b=C("week"),m=C(new Date),O=C(null),B=C(!1),I=C(!1),T=C([]),A=C([]),F=Array.from({length:11},(s,n)=>n+8),N=k(()=>m.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),E=k(()=>{const s=m.value.getFullYear(),n=m.value.getMonth(),e=new Date(s,n,1),o=new Date(e);o.setDate(o.getDate()-o.getDay());const x=[],w=new Date;w.setHours(0,0,0,0);for(let M=0;M<42;M++){const z=new Date(o);z.setDate(o.getDate()+M);const H=z.toISOString().split("T")[0],St=z.getTime()===w.getTime(),Tt=z.getMonth()===n,At=D.appointments.some(Mt=>Mt.starts_at.startsWith(H));x.push({date:H,day:z.getDate(),isToday:St,isCurrentMonth:Tt,hasAppointments:At})}return x}),$=k(()=>{const s=new Date(m.value),n=s.getDay(),e=s.getDate()-n+(n===0?-6:1);s.setDate(e);const o=[];for(let x=0;x<7;x++){const w=new Date(s);w.setDate(s.getDate()+x),o.push({date:w.toISOString().split("T")[0],label:w.toLocaleDateString("en-US",{weekday:"short",day:"numeric"})})}return o}),d=k(()=>{let s=D.appointments;return T.value.length>0&&(s=s.filter(n=>{const e=n.booked_by_coordinator?.id;return e&&T.value.includes(e)})),A.value.length>0&&(s=s.filter(n=>{const e=n.appointment_type?.id;return e&&A.value.includes(e)})),s}),i=k(()=>{const s=$.value[0].date,n=$.value[6].date;return d.value.filter(e=>{const o=e.starts_at.split("T")[0];return o>=s&&o<=n})}),p=k(()=>{const s=m.value.toISOString().split("T")[0];return d.value.filter(n=>n.starts_at.startsWith(s)).sort((n,e)=>n.starts_at.localeCompare(e.starts_at))}),Y=k(()=>{if(b.value==="day")return m.value.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});if(b.value==="week"){const s=$.value[0].date,n=$.value[6].date,e=new Date(s),o=new Date(n);return e.getMonth()===o.getMonth()?`${e.toLocaleDateString("en-US",{month:"long",day:"numeric"})} - ${o.getDate()}, ${e.getFullYear()}`:`${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${o.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else return N.value}),ct=k(()=>{const s=new Date().toISOString().split("T")[0],n=m.value.toISOString().split("T")[0];return s===n}),U=C(null),Q=k(()=>{const s=new Date().toISOString().split("T")[0];return d.value.filter(n=>n.starts_at.startsWith(s)).sort((n,e)=>n.starts_at.localeCompare(e.starts_at)).slice(0,5)}),ut=k(()=>y.coordinators),mt=k(()=>[]),pt=k(()=>{const s=new Date,n=new Date($.value[0].date),e=new Date($.value[6].date);return s>=n&&s<=e}),tt=k(()=>{const s=new Date,n=s.getHours(),e=s.getMinutes();return(n*60+e-480)/60*64});function et(s){m.value=new Date(s)}function gt(){const s=new Date(m.value);s.setMonth(s.getMonth()-1),m.value=s}function ft(){const s=new Date(m.value);s.setMonth(s.getMonth()+1),m.value=s}function vt(s){return new Date(s).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function q(s){const n=new Date(s.starts_at),e=n.getHours(),o=n.getMinutes(),x=e>12?e-12:e,w=e>=12?"PM":"AM";return`${x}:${o.toString().padStart(2,"0")} ${w}`}function P(s){if(s.contact){const n=s.contact;return`${n.first_name} ${n.last_name||""}`.trim()||"Unknown"}return"Unknown"}function xt(s){return s.booked_by_coordinator?s.booked_by_coordinator.display_name||"4 Call":"N/A"}function R(s){return s.appointment_type?s.appointment_type.name:s.title||"Appointment"}function X(s){const n=s.status.toLowerCase();return n==="confirmed"?"bg-blue-100 border-blue-200 text-blue-800":n==="pending"||n==="scheduled"?"bg-purple-100 border-purple-200 text-purple-800":n==="cancelled"?"bg-slate-100 border-slate-200 text-slate-600":"bg-amber-100 border-amber-200 text-amber-800"}function bt(s){const n=new Date(s.starts_at),e=new Date(s.ends_at),o=n.getHours()+n.getMinutes()/60,x=(e.getTime()-n.getTime())/(1e3*60*60),w=n.getDay(),M=w===0?7:w;return{top:(o-8)*64+"px",height:x*64+"px",gridColumnStart:M,gridColumnEnd:M+1}}function V(s){O.value=s,B.value=!0}async function ht(s){if(confirm("Are you sure you want to cancel this appointment?"))try{await D.cancelAppointment(s.id),B.value=!1}catch(n){console.error("Failed to cancel appointment:",n)}}function yt(s){B.value=!1,console.log("Edit appointment:",s)}function _t(s){return d.value.filter(n=>n.starts_at.startsWith(s)).slice(0,3)}function wt(s){const n=new Date(s.starts_at),e=new Date(s.ends_at),o=n.getHours()+n.getMinutes()/60,x=(e.getTime()-n.getTime())/(1e3*60*60);return{top:(o-8)*64+"px",height:x*64+"px"}}function kt(){const s=new Date(m.value);b.value==="day"?s.setDate(s.getDate()-1):b.value==="week"?s.setDate(s.getDate()-7):s.setMonth(s.getMonth()-1),m.value=s}function Dt(){const s=new Date(m.value);b.value==="day"?s.setDate(s.getDate()+1):b.value==="week"?s.setDate(s.getDate()+7):s.setMonth(s.getMonth()+1),m.value=s}function Ct(){m.value=new Date}function Z(s,n){U.value=n,s.dataTransfer&&(s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",n.id))}async function $t(s,n){if(s.preventDefault(),!U.value)return;const e=new Date(n),o=new Date(U.value.starts_at),w=new Date(U.value.ends_at).getTime()-o.getTime(),M=new Date(e);M.setHours(o.getHours(),o.getMinutes(),0,0);const z=new Date(M.getTime()+w);try{await D.updateAppointment(U.value.id,{starts_at:M.toISOString(),ends_at:z.toISOString()}),U.value=null}catch(H){console.error("Failed to update appointment:",H)}}return at(async()=>{v.currentOrganization||(await v.fetchOrganizations(),v.organizations.length>0&&v.setCurrentOrganization(v.organizations[0])),v.currentOrganization&&(await D.fetchAppointments(),await y.fetchCoordinators(v.currentOrganization.id))}),(s,n)=>(a(),l("div",ye,[t("div",_e,[n[6]||(n[6]=t("h1",{class:"text-3xl font-heading font-bold text-[#1B4F72]"},"Calendar",-1)),t("div",we,[t("div",ke,[(a(),l(g,null,f(["Day","Week","Month"],e=>t("button",{key:e,onClick:o=>b.value=e.toLowerCase(),class:_(["px-4 py-1.5 rounded-md text-sm font-medium transition-all",b.value===e.toLowerCase()?"bg-white text-[#1B4F72] shadow-sm":"text-slate-500 hover:text-slate-700"])},r(e),11,De)),64))]),t("button",{onClick:n[0]||(n[0]=e=>I.value=!0),class:"px-4 py-2 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 flex items-center gap-2"},[h(u(lt),{size:18}),n[5]||(n[5]=j(" Manual Appointment ",-1))])])]),t("div",Ce,[t("div",$e,[t("div",Se,[t("div",Te,[t("span",Ae,r(N.value),1),t("div",Me,[t("button",{onClick:gt,class:"p-1 hover:bg-slate-100 rounded"},[h(u(G),{size:16})]),t("button",{onClick:ft,class:"p-1 hover:bg-slate-100 rounded"},[h(u(J),{size:16})])])]),t("div",Be,[(a(),l(g,null,f(["S","M","T","W","T","F","S"],e=>t("div",{key:e,class:"text-slate-400 font-medium"},r(e),1)),64))]),t("div",Fe,[(a(!0),l(g,null,f(E.value,e=>(a(),l("button",{key:e.date,onClick:o=>et(e.date),class:_(["w-7 h-7 rounded-full flex items-center justify-center hover:bg-slate-50 relative",e.isToday?"bg-[#1B4F72] text-white hover:bg-[#1B4F72]":"text-slate-700",e.isCurrentMonth?"":"text-slate-300"])},[j(r(e.day)+" ",1),e.hasAppointments?(a(),l("div",{key:0,class:_(["absolute bottom-1 w-1 h-1 rounded-full",e.isToday?"bg-white":"bg-[#1B4F72]"])},null,2)):S("",!0)],10,ze))),128))])]),t("div",Oe,[n[7]||(n[7]=t("h3",{class:"font-bold text-[#1B4F72] mb-4"},"Upcoming Today",-1)),t("div",Ne,[(a(!0),l(g,null,f(Q.value,e=>(a(),l("div",{key:e.id,onClick:o=>V(e),class:"p-3 bg-slate-50 rounded-lg border border-slate-100 hover:border-[#1B4F72] transition-colors cursor-pointer"},[t("div",Ue,r(vt(e.starts_at)),1),t("div",Le,r(P(e)),1),t("div",je,r(R(e)),1)],8,Ee))),128)),Q.value.length===0?(a(),l("div",Ie," No appointments today ")):S("",!0)])]),t("div",Pe,[t("div",null,[n[8]||(n[8]=t("h4",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2"}," By 4 Call ",-1)),t("div",Ve,[(a(!0),l(g,null,f(ut.value,e=>(a(),l("label",{key:e.id,class:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer"},[st(t("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":n[1]||(n[1]=o=>T.value=o),class:"rounded text-[#1B4F72] focus:ring-[#1B4F72]"},null,8,He),[[nt,T.value]]),j(" "+r(e.display_name||e.role_template?.name||"N/A"),1)]))),128))])]),t("div",null,[n[9]||(n[9]=t("h4",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2"}," By Type ",-1)),t("div",We,[(a(!0),l(g,null,f(mt.value,e=>(a(),l("label",{key:e.id,class:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer"},[st(t("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":n[2]||(n[2]=o=>A.value=o),class:"rounded text-[#1B4F72] focus:ring-[#1B4F72]"},null,8,Ye),[[nt,A.value]]),j(" "+r(e.name),1)]))),128))])])])]),t("div",qe,[t("div",Re,[t("div",Xe,[t("button",{onClick:kt,class:"p-2 hover:bg-slate-100 rounded-lg transition-colors"},[h(u(G),{size:20})]),t("h2",Ze,r(Y.value),1),t("button",{onClick:Dt,class:"p-2 hover:bg-slate-100 rounded-lg transition-colors"},[h(u(J),{size:20})]),t("button",{onClick:Ct,class:"px-3 py-1 text-sm text-slate-600 hover:bg-slate-100 rounded-lg transition-colors"}," Today ")])]),b.value==="day"?(a(),l("div",Ge,[t("div",Je,[t("div",Ke,[(a(!0),l(g,null,f(u(F),e=>(a(),l("div",{key:e,class:"h-16 -mt-2.5"},r(e>12?e-12:e)+" "+r(e>=12?"PM":"AM"),1))),128))]),t("div",Qe,[(a(!0),l(g,null,f(u(F),e=>(a(),l("div",{key:e,class:"absolute w-full border-b border-slate-100 h-16",style:L({top:(e-8)*64+"px"})},null,4))),128)),ct.value?(a(),l("div",{key:0,class:"absolute w-full border-t-2 border-red-500 z-10",style:L({top:tt.value+"px"})},[...n[10]||(n[10]=[t("div",{class:"absolute -left-1.5 -top-1.5 w-3 h-3 rounded-full bg-red-500"},null,-1)])],4)):S("",!0),(a(!0),l(g,null,f(p.value,e=>(a(),l("div",{key:e.id,onClick:o=>V(e),draggable:"true",onDragstart:o=>Z(o,e),class:_(["absolute left-1 right-1 rounded-md border p-2 text-xs cursor-move hover:shadow-md transition-shadow overflow-hidden",X(e)]),style:L(wt(e))},[t("div",es,r(q(e))+" - "+r(P(e)),1),t("div",ss,r(R(e)),1)],46,ts))),128))])])])):b.value==="week"?(a(),l("div",ns,[t("div",os,[n[12]||(n[12]=t("div",{class:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50"},null,-1)),t("div",as,[(a(!0),l(g,null,f($.value,(e,o)=>(a(),l("div",{key:e.date,class:_(["py-3 text-center border-r border-slate-100 last:border-0",o===0?"bg-blue-50/30":""])},[t("div",{class:_(["text-sm font-medium",o===0?"text-[#1B4F72] font-bold":"text-slate-600"])},r(e.label),3)],2))),128))]),t("div",ls,[(a(!0),l(g,null,f(u(F),e=>(a(),l("div",{key:e,class:"h-16 -mt-2.5"},r(e>12?e-12:e)+" "+r(e>=12?"PM":"AM"),1))),128))]),t("div",is,[(a(!0),l(g,null,f(u(F),e=>(a(),l("div",{key:e,class:"absolute w-full border-b border-slate-100 h-16",style:L({top:(e-8)*64+"px"})},null,4))),128)),(a(),l(g,null,f(7,e=>t("div",{key:e,class:"border-r border-slate-100 h-full relative"},[e===1&&pt.value?(a(),l("div",{key:0,class:"absolute w-full border-t-2 border-red-500 z-10",style:L({top:tt.value+"px"})},[...n[11]||(n[11]=[t("div",{class:"absolute -left-1.5 -top-1.5 w-3 h-3 rounded-full bg-red-500"},null,-1)])],4)):S("",!0)])),64)),(a(!0),l(g,null,f(i.value,e=>(a(),l("div",{key:e.id,onClick:o=>V(e),draggable:"true",onDragstart:o=>Z(o,e),class:_(["absolute left-1 right-1 rounded-md border p-2 text-xs cursor-move hover:shadow-md transition-shadow overflow-hidden",X(e)]),style:L(bt(e))},[t("div",ds,r(q(e))+" - "+r(P(e)),1),t("div",cs,r(R(e)),1),t("div",us,[h(u(Ut),{size:10}),j(" "+r(xt(e)),1)])],46,rs))),128))])])])):b.value==="month"?(a(),l("div",ms,[t("div",ps,[(a(),l(g,null,f(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=>t("div",{key:e,class:"text-center text-xs font-semibold text-slate-500 py-2"},r(e),1)),64))]),t("div",gs,[(a(!0),l(g,null,f(E.value,e=>(a(),l("div",{key:e.date,onClick:o=>et(e.date),onDrop:o=>$t(o,e.date),onDragover:n[3]||(n[3]=W(()=>{},["prevent"])),class:_(["min-h-[100px] p-2 border border-slate-200 rounded-lg cursor-pointer transition-colors",e.isToday?"bg-blue-50 border-[#1B4F72]":"bg-white hover:bg-slate-50",e.isCurrentMonth?"":"opacity-40"])},[t("div",{class:_(["text-sm font-medium mb-1",e.isToday?"text-[#1B4F72] font-bold":"text-slate-700"])},r(e.day),3),t("div",vs,[(a(!0),l(g,null,f(_t(e.date),o=>(a(),l("div",{key:o.id,onClick:W(x=>V(o),["stop"]),draggable:"true",onDragstart:x=>Z(x,o),class:_(["text-xs p-1 rounded truncate cursor-move",X(o)])},r(q(o))+" "+r(P(o)),43,xs))),128))])],42,fs))),128))])])):S("",!0)])]),h(dt,{appointment:O.value,"is-open":B.value,onClose:n[4]||(n[4]=e=>B.value=!1),onCancel:ht,onEdit:yt},null,8,["appointment","is-open"])]))}}),hs={class:"space-y-6"},ys={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},_s={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between"},ws={class:"flex gap-2"},ks={class:"flex gap-2"},Ds={key:0,class:"text-center py-12"},Cs={key:2,class:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden"},$s={class:"overflow-x-auto"},Ss={class:"w-full text-sm text-left"},Ts={class:"divide-y divide-slate-100"},As=["onClick"],Ms={class:"px-6 py-4"},Bs={class:"font-medium text-slate-900"},Fs={class:"text-xs text-slate-500"},zs={class:"px-6 py-4 font-medium text-slate-900"},Os={class:"px-6 py-4 text-slate-600"},Ns={class:"px-6 py-4 text-slate-600"},Es={class:"px-6 py-4"},Us=["onClick"],Ls={key:0},js={key:3,class:"bg-white rounded-xl border border-slate-200 shadow-sm p-6"},Js=K({__name:"AppointmentsPage",setup(c){const D=it(),y=rt(),v=C("list"),b=C(!1),m=Pt,O=Vt,B=d=>Ht(d),I=d=>Wt(d,"N/A"),T=C(null),A=C(!1);function F(d){T.value=d,A.value=!0}function N(){}function E(){}function $(){}return at(async()=>{try{y.currentOrganization||(await y.fetchOrganizations(),y.organizations.length>0&&y.setCurrentOrganization(y.organizations[0])),y.currentOrganization?.id&&await D.fetchAppointments()}catch(d){console.error("Failed to load appointments:",d)}}),(d,i)=>(a(),ot(Ft,null,{default:Bt(()=>[t("div",hs,[t("div",ys,[i[6]||(i[6]=t("div",null,[t("h1",{class:"text-3xl font-heading font-bold text-[#1B4F72]"}," Appointments "),t("p",{class:"text-slate-500 mt-1"},"Manage your calendar and appointments")],-1)),t("button",{onClick:i[0]||(i[0]=p=>b.value=!0),class:"px-5 py-2.5 bg-[#F59E0B] hover:bg-[#D97706] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 flex items-center gap-2"},[h(u(lt),{size:18}),i[5]||(i[5]=j(" New Appointment ",-1))])]),t("div",_s,[t("div",ws,[t("button",{class:_(["px-4 py-2 rounded-lg font-medium transition-colors",v.value==="list"?"bg-[#1B4F72] text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"]),onClick:i[1]||(i[1]=p=>v.value="list")}," List View ",2),t("button",{class:_(["px-4 py-2 rounded-lg font-medium transition-colors",v.value==="calendar"?"bg-[#1B4F72] text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"]),onClick:i[2]||(i[2]=p=>v.value="calendar")}," Calendar View ",2)]),t("div",ks,[t("button",{onClick:N,class:"px-4 py-2 border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50"}," Today "),t("button",{onClick:E,class:"p-2 border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50"},[h(u(G),{size:16})]),t("button",{onClick:$,class:"p-2 border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50"},[h(u(J),{size:16})])])]),u(D).loading?(a(),l("div",Ds,[...i[7]||(i[7]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#1B4F72]"},null,-1),t("p",{class:"mt-4 text-slate-500"},"Loading appointments...",-1)])])):v.value==="calendar"?(a(),ot(bs,{key:1})):v.value==="list"?(a(),l("div",Cs,[t("div",$s,[t("table",Ss,[i[9]||(i[9]=t("thead",{class:"bg-slate-50 text-slate-500 font-medium border-b border-slate-200"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Date/Time"),t("th",{class:"px-6 py-3"},"Contact"),t("th",{class:"px-6 py-3"},"Type"),t("th",{class:"px-6 py-3"},"4 Call"),t("th",{class:"px-6 py-3"},"Status"),t("th",{class:"px-6 py-3 text-right"},"Actions")])],-1)),t("tbody",Ts,[(a(!0),l(g,null,f(u(D).appointments,p=>(a(),l("tr",{key:p.id,class:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:Y=>F(p)},[t("td",Ms,[t("div",Bs,r(u(It)(p.starts_at)),1),t("div",Fs,r(u(m)(p.starts_at,p.ends_at)),1)]),t("td",zs,r(B(p)),1),t("td",Os,r(p.appointment_type?.name||p.title),1),t("td",Ns,r(I(p)),1),t("td",Es,[t("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",u(O)(p.status)])},r(p.status),3)]),t("td",{class:"px-6 py-4 text-right",onClick:i[3]||(i[3]=W(()=>{},["stop"]))},[t("button",{onClick:W(Y=>F(p),["stop"]),class:"p-1 text-slate-400 hover:text-[#1B4F72] rounded hover:bg-slate-100"},[h(u(Lt),{size:16})],8,Us)])],8,As))),128)),u(D).appointments.length===0?(a(),l("tr",Ls,[...i[8]||(i[8]=[t("td",{colspan:"6",class:"px-6 py-8 text-center text-slate-500"}," No appointments found ",-1)])])):S("",!0)])])])])):(a(),l("div",js,[...i[10]||(i[10]=[t("div",{class:"text-center text-slate-500 py-12"}," Calendar view coming soon ",-1)])]))]),h(dt,{appointment:T.value,"is-open":A.value,onClose:i[4]||(i[4]=p=>A.value=!1)},null,8,["appointment","is-open"])]),_:1}))}});export{Js as default};
